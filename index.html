<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="UTF-8">
    <title>Angular-recorder by logbon72</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
</head>
<body>
<section class="page-header">
    <h1 class="project-name">Angular Audio Recorder</h1>

    <h2 class="project-tagline">AngularJS audio recorder supporting Cordova Media, HTML5 and Flash</h2>
    <a href="https://github.com/logbon72/angular-recorder" class="btn">View on GitHub</a>
    <a href="https://github.com/logbon72/angular-recorder/zipball/master" class="btn">Download .zip</a>
    <a href="https://github.com/logbon72/angular-recorder/tarball/master" class="btn">Download .tar.gz</a>
</section>

<section class="main-content">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1><a
            id="user-content-angular-audio-recorder" class="anchor" href="#angular-audio-recorder"
            aria-hidden="true"><span class="octicon octicon-link"></span></a>Angular Audio Recorder</h1>

        <p>This is an AngularJS plugin for recording audio input. The directive uses one of the following
            internally:</p>

        <ul>
            <li><a href="https://github.com/apache/cordova-plugin-media">Cordova Media Plugin</a> when wrapped in a
                Cordova application.
            </li>
            <li>HTML5 <code>navigator.*getUserMedia()</code> and <a href="https://github.com/mattdiamond/Recorderjs">RecorderJS</a>
                when available
            </li>
            <li>Falls back to <a href="https://github.com/michalstocki/FlashWavRecorder">FlashWaveRecorder</a> in web
                browsers that do not support <code>*getUserMedia()</code>.
            </li>
        </ul>

        <p>This plugin also has the ability to convert the resulting Wave audio file into MP3. This is made optional for
            MPEG license reasons.</p>

        <p>Wave for the resulting audio is displayed using <a href="https://github.com/katspaugh/wavesurfer.js">wavesurfer.js</a>
        </p>

        <h2><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>Installation</h2>

        <p>To install via Bower, simply do the following:</p>

        <div class="highlight highlight-source-shell">
            <pre>bower install angularAudioRecorder</pre>
        </div>

        <p><strong>NOTICE:</strong> When using Cordova, the Media plugin is required, see <a
                href="https://github.com/apache/cordova-plugin-media">Cordova Media Plugin</a> for details on
            Installation.</p>

        <h2><a id="user-content-demo" class="anchor" href="#demo" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>Demo</h2>

        <p>See the <a href="demo">demo</a> directory for a simple demo.</p>

        <h2><a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>Usage</h2>

        <p>The Audio recorder is a directive and it can be used as an attribute or an element (preffered).</p>

        <p>The general structure is :</p>

        <div class="highlight highlight-text-html-basic"><pre><span
                class="pl-c">&lt;!-- Somewhere on your page --&gt;</span>
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>/path/to/audio-recorder/lib/html5-recorder.js<span
                    class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>/path/to/audio-recorder/lib/flash-recorder.js<span
                    class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>/path/to/audio-recorder/audio-recorder.js<span
                    class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;
<span class="pl-c">&lt;!--- use if you want wave display !--&gt;</span>
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>/path/to/wavesurfer/wavesurfer.min.js<span
                    class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre>
        </div>

        <p>Then add as a dependency to your project:</p>

        <div class="highlight highlight-source-js"><pre>angular.module(<span class="pl-s"><span class="pl-pds">'</span>yourAppName<span
                class="pl-pds">'</span></span>, [
    <span class="pl-c">//include other dependencies</span>
    <span class="pl-s"><span class="pl-pds">'</span>angularAudioRecorder<span class="pl-pds">'</span></span>
]);</pre>
        </div>

        <p>You can configure options using</p>

        <div class="highlight highlight-source-js"><pre>angular.module(<span class="pl-s"><span class="pl-pds">'</span>yourAppName<span
                class="pl-pds">'</span></span>)
      .config([<span class="pl-s"><span class="pl-pds">'</span>recorderServiceProvider<span
                    class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">recorderServiceProvider</span>){
        <span class="pl-c">//configure here</span>
      }]);</pre>
        </div>

        <div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">ng</span><span class="pl-e">-audio-recorder</span> <span
                class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">'</span>audioInput<span
                class="pl-pds">'</span></span> <span class="pl-e">audio-model</span>=<span class="pl-s"><span
                class="pl-pds">'</span>recordedInput<span class="pl-pds">'</span></span>&gt;
  <span class="pl-c">&lt;!-- Start controls, exposed via recorder--&gt;</span>
  &lt;<span class="pl-ent">div</span> <span class="pl-e">ng-if</span>=<span class="pl-s"><span class="pl-pds">"</span>recorder.isAvailable<span
                    class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">button</span> <span class="pl-e">ng-click</span>=<span class="pl-s"><span
                    class="pl-pds">"</span>recorder.startRecord()<span class="pl-pds">"</span></span> <span
                    class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>button<span class="pl-pds">"</span></span> <span
                    class="pl-e">ng-disabled</span>=<span class="pl-s"><span class="pl-pds">"</span>recorder.status.isRecording<span
                    class="pl-pds">"</span></span>&gt;
        Start Record
    &lt;/<span class="pl-ent">button</span>&gt;
    &lt;<span class="pl-ent">button</span> <span class="pl-e">ng-click</span>=<span class="pl-s"><span
                    class="pl-pds">"</span>recorder.stopRecord()<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span
                    class="pl-s"><span class="pl-pds">"</span>button<span class="pl-pds">"</span></span> <span
                    class="pl-e">ng-disabled</span>=<span class="pl-s"><span class="pl-pds">"</span>recorder.status.isRecording === false<span
                    class="pl-pds">"</span></span>&gt;
        Stop Record
    &lt;/<span class="pl-ent">button</span>&gt;
    &lt;<span class="pl-ent">button</span> <span class="pl-e">ng-click</span>=<span class="pl-s"><span
                    class="pl-pds">"</span>recorder.playbackRecording()<span class="pl-pds">"</span></span> <span
                    class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>button<span class="pl-pds">"</span></span>
            <span class="pl-e">ng-disabled</span>=<span class="pl-s"><span class="pl-pds">"</span>recorder.status.isRecording || !recorder.audioModel<span
                    class="pl-pds">"</span></span>&gt;
        Play Back
    &lt;/<span class="pl-ent">button</span>&gt;
  &lt;/<span class="pl-ent">div</span>&gt;

  &lt;<span class="pl-ent">div</span> <span class="pl-e">ng-if</span>=<span class="pl-s"><span class="pl-pds">"</span>!recorder.isAvailable<span
                    class="pl-pds">"</span></span>&gt;
    Message for users when recording is not possible.
  &lt;/<span class="pl-ent">div</span>&gt;
  <span class="pl-c">&lt;!-- End controls--&gt;</span>
&lt;/<span class="pl-ent">ng</span><span class="pl-e">-audio-recorder</span>&gt;</pre>
        </div>

        <h2><a id="user-content-api-reference" class="anchor" href="#api-reference" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>API Reference</h2>

        <blockquote>
            <p>Please note that TypeScript/Flow type notations are used here for easy comprehension.</p>
        </blockquote>

        <p>The following API are exposed to your application.</p>

        <h3><a id="user-content-provider-recorderserviceprovider" class="anchor"
               href="#provider-recorderserviceprovider" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>Provider <code>recorderServiceProvider</code></h3>

        <p>This is the provider for configuring the <code>recorderService</code>.</p>

        <ul>
            <li><p><code>recorderServiceProvider.forceSwf(force: boolean) : recorderServiceProvider</code>: This method
                can be used to force the plugin to use SWF for Audio input.</p></li>
            <li><p><code>recorderServiceProvider.setSwfUrl(url: String): recorderServiceProvider</code>: Sets the URL
                for the Flash Wave Recorder SWF, should be used only when the SWF is not in the default location.</p>
            </li>
            <li><p><code>recorderServiceProvider.withMp3Conversion(convert: boolean, config : Object) :
                recorderServiceProvider</code>: This tells the service to use MP3 conversion for the resulting audio
                file. The <code>convert</code> variable tells the service to provide conversion, while the config object
                can be used to specify MP3 conversion properties. The <code>config</code> object can contain the
                following properties.</p>

                <ul>
                    <li><code>lameJsUrl : string</code> : URL path to lame.js, should only be specified it it is not in
                        the lib directory.
                    </li>
                    <li><code>bitRate : number</code>: The <a href="https://en.wikipedia.org/wiki/MP3#Bit_rate">bit
                        rate</a> of the resulting MP3 file. Must be one of 32, 40, 48, 56, 64, 80, 96, 112, 128, 160,
                        192, 224, 256 or 320
                    </li>
                </ul>
            </li>
        </ul>

        <h3><a id="user-content-service-recorderservice" class="anchor" href="#service-recorderservice"
               aria-hidden="true"><span class="octicon octicon-link"></span></a>Service <code>recorderService</code>
        </h3>

        <p>This service is used internally by the directive, even though it's exposed to your application, there is no
            guarantee on its behavior.</p>

        <h4><a id="user-content-properties" class="anchor" href="#properties" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>Properties</h4>

        <ul>
            <li><p><code>recorderService.isReady : boolean</code>: field indicating the recorder is ready.</p></li>
            <li><p><code>recorderService.isHtml5 : boolean</code>: field indicating the recorder is using HTML5
                internally.</p></li>
            <li><p><code>recorderService.isCordova : boolean</code>: field indicating the recorder is using Cordova
                Media.</p></li>
        </ul>

        <h4><a id="user-content-methods" class="anchor" href="#methods" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>Methods</h4>

        <ul>
            <li><p><code>recorderService.isAvailable() : boolean</code>: method that indicates if recording is available
                or not. When this returns false, it implies that none of the methods above could be used to record.</p>
            </li>
            <li><p><code>recorderService.getHandler() : Object</code>: returns the current handler being used
                internally.</p></li>
            <li><p><code>recorderService.showPermission(options : Object)</code>: This method is used to request for
                user permission to use the Microphone (Flash &amp; HTML5). The options is a list of callbacks to be
                called for various events:</p>

                <ul>
                    <li>onAllowed: callback to call when user grants permission.</li>
                    <li>onDenied: callback to call when user denies permission.</li>
                    <li>onClosed: callback to call when a user closes the permission window (Flash).
                        The callbacks do not accept any arguments.
                    </li>
                </ul>
            </li>
            <li><p><code>recorderService.controller(id : sting) : ngAudioRecorderController</code>: returns the
                controller for the recorder with the specified ID. The ID is the ID attribute of the element with the
                <code>ng-audio-recorder</code> directive on it.</p></li>
            <li><code>recorderService.getMp3Config() : Object</code>: returns the MP3 conversion configuration.</li>
            <li><code>recorderService.shouldConvertToMp3() : boolean</code> : indicates if the output will be converted
                to MP3
            </li>
            <li><code>recorderService.swfIsLoaded() : boolean</code> : indicates if SWF has been loaded, useful when in
                SWF mode.
            </li>
        </ul>

        <h3><a id="user-content-directive-ngaudiorecorder" class="anchor" href="#directive-ngaudiorecorder"
               aria-hidden="true"><span class="octicon octicon-link"></span></a>Directive <code>ngAudioRecorder</code>
        </h3>

        <div class="highlight highlight-text-html-basic">
            <pre>&lt;<span class="pl-ent">ng</span><span class="pl-e">-audio-recorder</span> <span class="pl-e">attributes</span>...&gt;&lt;/<span
                    class="pl-ent">ng</span><span class="pl-e">-audio-recorder</span>&gt;</pre>
        </div>

        <p>This is probably the only component which you will interact with when using this application, it can be used
            as an element (preffered) or as an attribute. The directive takes in the following attributes:</p>

        <ul>
            <li><code>audio-model</code>: the model within your controller to bind the recorded audio message to. The
                recorded message is a Blob.
            </li>
            <li><code>id</code>: A unique identifier for your input.</li>
            <li><code>show-player</code>: Indicates if the audio player should be shown after recording is stopped.</li>
            <li><code>auto-start</code>: indicates if the recording should be started automatically.</li>
            <li><code>on-record-start</code>: callback to execute when recording is started.</li>
            <li><code>on-record-complete</code>: callback to execute when recording is complete.</li>
            <li><code>on-playback-start</code>: callback to execute when playback is started.</li>
            <li><code>on-playback-complete</code>: callback to execute when playback is completed.</li>
            <li><code>on-playback-pause</code>: callback to execute when playback is paused.</li>
            <li><code>on-playback-resume</code>: callback to execute when playback is resumed after pausing.</li>
            <li><code>on-conversion-start</code>: callback to execute when MP3 conversion starts.</li>
            <li><code>on-conversion-complete</code>: callback to execute when MP3 conversion is completed</li>
            <li><code>convert-mp3</code>: Specifies if MP3 conversion should be done for this particular element, it
                overrides whatever was specified for <code>recorderServiceProvider.withMp3Conversion()</code></li>
        </ul>

        <h3><a id="user-content-controller-ngaudiorecordercontroller" class="anchor"
               href="#controller-ngaudiorecordercontroller" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>Controller <code>ngAudioRecorderController</code></h3>

        <p>The controller for the <code>ngAudioRecorder</code> directive is exposed to your template (within the
            directive element) as an object <code>recorder</code> which can be used to control the recording and the
            playback.</p>

        <p>The controller exposes the following :</p>

        <h4><a id="user-content-properties-1" class="anchor" href="#properties-1" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>Properties</h4>

        <ul>
            <li><p><code>recorder.status : object</code>: A read-only object with status of the record controller. The
                fields in the status object are:</p>

                <ul>
                    <li><code>isRecording : boolean</code>: variable indicating if audio record is in progress.</li>
                    <li><code>isDenied : boolean</code>: variable indicating if the permission to use audio device was
                        denied. This is set to <code>null</code> when permission is yet to be requested.
                    </li>
                    <li><code>isPlaying : boolean</code>: variable indicating if playback is in progress.</li>
                    <li><code>isPaused : boolean</code>: variable indicating if playback is in Paused.</li>
                    <li><code>isStopped : boolean</code>: variable indicating if playback has ended or stopped.</li>
                    <li><code>isConverting : boolean</code>: variable indicating if conversion is ongoing.</li>
                    <li><code>playback : number</code>: variable indicating status of playback (0 = stopped, 1 =
                        playing, 2 = paused).
                    </li>
                </ul>
            </li>
            <li><p><code>recorder.isAvailable : boolean</code>: variable indicating if audio recording is available.</p>
            </li>
            <li><code>recorder.elapsedTime : number</code> : The total time elapsed so far while recording, updated
                every second.
            </li>
        </ul>

        <h4><a id="user-content-methods-1" class="anchor" href="#methods-1" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>Methods</h4>

        <ul>
            <li><code>recorder.isHtml5() : boolean</code>: indicates if HTML5 recording is being used.</li>
            <li><code>recorder.getAudioPlayer() : (Media | HTMLAudioElement)</code>: returns the underlying audio
                player.
            </li>
            <li><code>recorder.startRecording() : void</code>: starts audio recording, might request permission if the
                user is yet to grant permission to the application.
            </li>
            <li><code>recorder.stopRecording() : void</code>: stops an ongoing recording and sets the audio model.</li>
            <li><code>recorder.playbackRecording() : void</code>: Plays the recorded message if available.</li>
            <li><code>recorder.playbackPause() : void</code>: Pauses the playback of recorded message.</li>
            <li><code>recorder.playbackResume() : void</code>: Resumes a paused playback of recorded message.</li>
            <li><code>recorder.save(fileName : string) : void</code>: Triggers download of the recorded audio file. If
                <code>fileName</code> is specified, it will be used for as the name of the download file.
            </li>
        </ul>

        <h3><a id="user-content-directive-ngaudiorecorderanalyzer" class="anchor"
               href="#directive-ngaudiorecorderanalyzer" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>Directive <code>ngAudioRecorderAnalyzer</code></h3>

        <div class="highlight highlight-text-html-basic">
            <pre>&lt;<span class="pl-ent">ng</span><span class="pl-e">-audio-recorder-analyzer</span>&gt;&lt;/<span
                    class="pl-ent">ng</span><span class="pl-e">-audio-recorder-analyzer</span>&gt;</pre>
        </div>

        <p>This directive displays audio input analysis during recording, <a
                href="http://webaudiodemos.appspot.com/AudioRecorder/index.html">see here</a> for example of what an
            analyzer looks like. </p>

        <p>Please note this directive is only available in HTML5 mode.</p>

        <h3><a id="user-content-directive-ngaudiorecorderwaveview" class="anchor"
               href="#directive-ngaudiorecorderwaveview" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>Directive <code>ngAudioRecorderWaveView</code></h3>

        <div class="highlight highlight-text-html-basic">
            <pre>&lt;<span class="pl-ent">ng</span><span class="pl-e">-audio-recorder-wave-view</span> <span
                    class="pl-e">attributes</span>&gt;&lt;/<span class="pl-ent">ng</span><span class="pl-e">-audio-recorder-wave-view</span>&gt;</pre>
        </div>

        <p>This directive displays the waveform of the recorded audio, using <a
                href="https://github.com/katspaugh/wavesurfer.js">wavesurfer.js</a></p>

        <p>The options for initializing the WaveSurfer object can be passed in as attributes of the <code>ng-audio-recorder-wave-view</code>.
        </p>

        <p>For details of the options available when initializing WaveSurfer, <a
                href="https://github.com/katspaugh/wavesurfer.js/blob/master/README.md#user-content-wavesurfer-options">see
            here</a></p>

        <p>Since attributes passed to AngularJS directives are normalized, you should pass the options as dash
            delimited, as an example <code>barWidth</code> should be passed <code>bar-width</code>.</p>

        <h2><a id="user-content-credits" class="anchor" href="#credits" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>Credits</h2>

        <ul>
            <li>This Repo was originally forked from <a href="https://github.com/sathyapulse/angular-recorder">https://github.com/sathyapulse/angular-recorder</a>
                the structural changes were too much, I had to create a new project off it.
            </li>
            <li><a href="https://github.com/mattdiamond/Recorderjs">RecorderJS</a></li>
            <li><a href="http://audior.ec/blog/recording-mp3-using-only-html5-and-javascript-recordmp3-js/">This article
                for RecordMp3Js</a></li>
            <li><a href="https://github.com/zhuker/lamejs">LameJS</a></li>
            <li><a href="https://github.com/michalstocki/FlashWavRecorder">FlashWaveRecorder</a></li>
            <li><a href="https://github.com/apache/cordova-plugin-media">Cordova Media Plugin</a></li>
            <li><a href="https://github.com/cwilso/AudioRecorder">Web Audio Demo</a> by <a
                    href="https://github.com/cwilso">Chris Wilson</a></li>
            <li><a href="https://github.com/katspaugh/wavesurfer.js">WaveSurfer.js</a></li>
        </ul>

        <h2><a id="user-content-license-mit" class="anchor" href="#license-mit" aria-hidden="true"><span
                class="octicon octicon-link"></span></a>License (MIT)</h2>

        <p>Copyright © 2015</p>

        <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
            documentation files (the "Software"), to deal in the Software without restriction, including without
            limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
            the Software, and to permit persons to whom the Software is furnished to do so, subject to the following
            conditions:</p>

        <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions
            of the Software.</p>

        <p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED
            TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT
            SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
            ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
            OTHER DEALINGS IN THE SOFTWARE.</p>
    </article>

    <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/logbon72/angular-recorder">Angular-recorder</a> is maintained by <a
                href="https://github.com/logbon72">logbon72</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a
                href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a
                href="https://twitter.com/jasonlong">Jason Long</a>.</span>
    </footer>

</section>


</body>
</html>
